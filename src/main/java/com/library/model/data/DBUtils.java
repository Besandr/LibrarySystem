package com.library.model.data;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

/**
 * Contains util methods for DAOs
 */
public class DBUtils {

    /**
     * Returns id from executed insert statement
     * @param insertStatement - executed statement
     * @return - autogenerated by DB id or -1 if {@code Statement}  object did
     * not generate any keys
     * @throws SQLException if a database access error occurs or
     * this method is called on a closed {@code Statement}
     */
    public static long getIdFromStatement(Statement insertStatement) throws SQLException {

        long id = -1;

        ResultSet generatedKeys = insertStatement.getGeneratedKeys();

        if (generatedKeys.next()) {
            id = generatedKeys.getLong(1);
        }

        return id;
    }
}

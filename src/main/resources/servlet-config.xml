<?xml version="1.0" encoding="UTF-8" ?>

<servlet-config>

    <forms>
        <form>
            <name>bookSearchForm</name>
            <type>com.library.web.controller.forms.BookSearchForm</type>
        </form>
        <form>
            <name>OrderBookForm</name>
            <type>com.library.web.controller.forms.OrderBookForm</type>
        </form>
        <form>
            <name>userLoginForm</name>
            <type>com.library.web.controller.forms.UserLoginForm</type>
        </form>
        <form>
            <name>userRegistrationForm</name>
            <type>com.library.web.controller.forms.UserRegistrationForm</type>
        </form>
    </forms>

    <action-mappings>
        <action>
            <path>/</path>
            <type>com.library.web.controller.actions.ShowTitlePageAction</type>
        </action>
        <action>
            <path>/bookSearch</path>
            <type>com.library.web.controller.actions.ShowBookSearchPageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.library.model.services.BookService</class>
                    <name>bookService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/bookSearch.do</path>
            <type>com.library.web.controller.actions.BookSearchAction</type>
            <name>bookSearchForm</name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/bookSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.library.model.services.BookService</class>
                    <name>bookService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/user/orderBook.do</path>
            <type>com.library.web.controller.actions.OrderBookAction</type>
            <name>OrderBookForm</name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/bookSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.library.model.services.LoanService</class>
                    <name>loanService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/login</path>
            <type>com.library.web.controller.actions.ShowLoginPageAction</type>
        </action>
        <action>
            <path>/login.do</path>
            <type>com.library.web.controller.actions.LoginAction</type>
            <name>userLoginForm</name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/login.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.library.model.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/logout</path>
            <type>com.library.web.controller.actions.LogoutAction</type>
        </action>
        <action>
            <path>/registration</path>
            <type>com.library.web.controller.actions.ShowUserRegistrationPageAction</type>
        </action>
        <action>
            <path>/register.do</path>
            <type>com.library.web.controller.actions.RegisterUserAction</type>
            <name>userRegistrationForm</name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/registration.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.library.model.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/title</path>
            <type>com.library.web.controller.actions.ShowTitlePageAction</type>
        </action>
        <action>
            <path>/changeLanguage</path>
            <type>com.library.web.controller.actions.ChangeLanguageAction</type>
        </action>
    </action-mappings>

    <forwards>
        <entry>
            <key>ShowTitlePage</key>
            <value>/WEB-INF/jsp/titlePage.jsp</value>
        </entry>
        <entry>
            <key>ShowLoginPage</key>
            <value>/WEB-INF/jsp/login.jsp</value>
        </entry>
        <entry>
            <key>ShowRegistrationPage</key>
            <value>/WEB-INF/jsp/registration.jsp</value>
        </entry>
        <entry>
            <key>ShowBookSearchPage</key>
            <value>/WEB-INF/jsp/bookSearch.jsp</value>
        </entry>
        <entry>
            <key>ShowUserCabinetPage</key>
            <value>/WEB-INF/jsp/userCabinet.jsp</value>
        </entry>
        <entry>
            <key>ShowAccessDeniedPage</key>
            <value>/WEB-INF/jsp/accessDenied.jsp</value>
        </entry>
        <entry>
            <key>successPage</key>
            <value>/WEB-INF/jsp/successfulRedirect.jsp</value>
        </entry>
    </forwards>

    <security-constraint>
        <resource>
            <url-pattern>/user</url-pattern>
            <allowed-roles>
                <role>USER</role>
            </allowed-roles>
        </resource>
        <resource>
            <url-pattern>/admin</url-pattern>
            <allowed-roles>
                <role>ADMINISTRATOR</role>
            </allowed-roles>
        </resource>
    </security-constraint>

</servlet-config>
